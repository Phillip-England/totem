<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Settings</title>
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .form-box { margin: 16px 0; padding: 12px; border: 1px solid #ddd; border-radius: 6px; }
    </style>
</head>
<body>
    <h1>User Settings</h1>
    <nav style="margin-bottom: 20px;">
        <a href="/admin">Back to Admin</a> |
        <a href="/logout">Logout</a>
    </nav>

    <div class="form-box">
        <h2>Update My Credentials</h2>
        <form action="/admin/users/update" method="POST">
            <label>Username:<br>
                <input type="text" name="username" value="{{ .User.Username }}" required>
            </label>
            <br><br>
            <label>New Password:<br>
                <input type="password" name="password" required>
            </label>
            <br><br>
            <button type="submit">Update</button>
        </form>
    </div>

    <div class="form-box">
        <h2>Create User</h2>
        <form action="/admin/users/create" method="POST">
            <label>Username:<br>
                <input type="text" name="username" required>
            </label>
            <br><br>
            <label>Password:<br>
                <input type="password" name="password" required>
            </label>
            <br><br>
            <label>Role:<br>
                <select name="role">
                    <option value="admin">Admin</option>
                    <option value="user">User</option>
                </select>
            </label>
            <br><br>
            <button type="submit">Create User</button>
        </form>
    </div>

    <h2>Existing Users</h2>
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Role</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            {{ range .Users }}
            <tr>
                <td>{{ .Username }}</td>
                <td>{{ .Role }}</td>
                <td>{{ .CreatedAt }}</td>
            </tr>
            {{ else }}
            <tr>
                <td colspan="3">No users found.</td>
            </tr>
            {{ end }}
        </tbody>
    </table>
</body>
</html>
